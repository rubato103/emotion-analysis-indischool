# 04 스크립트 로드 테스트
# 이 파일은 04_batch_emotion_analysis.R의 로드 과정을 단계별로 테스트합니다.

cat("🧪 04 스크립트 로드 테스트 시작\n")
cat(rep("=", 50), "\n")

# 1단계: 현재 작업 디렉토리 확인
cat("1️⃣ 작업 디렉토리 확인\n")
wd <- getwd()
cat("현재 디렉토리:", wd, "\n")

# 2단계: 필수 파일들 존재 확인
cat("\n2️⃣ 필수 파일 존재 확인\n")
required_files <- c("config.R", "utils.R", "analysis_tracker.R", "adaptive_sampling.R")
for (file in required_files) {
  if (file.exists(file)) {
    cat("✅", file, "- 존재\n")
  } else {
    cat("❌", file, "- 없음\n")
  }
}

# 3단계: 04 스크립트 로드 시도
cat("\n3️⃣ 04 스크립트 로드 시도\n")
tryCatch({
  source("04_batch_emotion_analysis.R")
  cat("🎉 04 스크립트 로드 성공!\n")
}, error = function(e) {
  cat("❌ 04 스크립트 로드 실패:\n")
  cat("오류 메시지:", e$message, "\n")
  cat("\n🔍 문제 해결 방법:\n")
  cat("1. 누락된 파일들을 확인하고 생성해주세요\n")
  cat("2. R 패키지가 설치되었는지 확인해주세요\n")
  cat("3. API 키가 설정되었는지 확인해주세요\n")
})

cat(rep("=", 50), "\n")
cat("🧪 테스트 완료\n")