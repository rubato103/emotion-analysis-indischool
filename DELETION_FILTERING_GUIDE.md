# 삭제된 콘텐츠 필터링 가이드
# 목적: 데이터 분석 시 삭제된 게시물/댓글을 정확히 식별하고 제외하기 위한 기준

## 1. 식별된 삭제 패턴

### A. Content 기반 삭제 패턴

#### 기본 삭제 메시지 (즉시 필터링 대상)
1. "작성자가 댓글을 삭제하였습니다" - 3,124건
2. "비밀 댓글입니다" - 4,990건
3. "내용 없음" - 1,853건
4. "다수의 신고 또는 커뮤니티 이용규정을 위반하여 차단된 게시물입니다" - 517건
5. "삭제된 댓글입니다" - 3건
6. "삭제된 게시글입니다" - 0건 (확인 필요)

#### 삭제 관련 키워드 (컨텐츠 필터링 대상)
1. "삭제되었습니다" - 6건
2. "삭제 되었습니다" - 4건
3. "삭제됨" - 3건
4. "삭제되어" - 29건
5. "삭제하였습니다" - 3,144건
6. "삭제했습니다" - 38건
7. "삭제합니다" - 38건
8. "삭제하겠습니다" - 45건
9. "삭제 예정" - 1건
10. "삭제 요청" - 17건
11. "삭제 조치" - 5건

### B. Author 기반 삭제 패턴

#### 탈퇴 회원 식별
1. "탈퇴회원" - 11,612건
2. "탈퇴 회원" - 포함됨
3. 기타 패턴 (정규식): "탈퇴.*계정", "알수없는.*사용자", "삭제된.*사용자"

### C. 콘텐츠 품질 기반 필터링

#### 자동 필터링 기준
1. 빈 내용: NA 또는 빈 문자열 또는 공백만 있는 내용
2. 매우 짧은 내용: 2자 이하의 내용
3. 유효 문자 미포함: 한글/영문이 전혀 포함되지 않은 내용

## 2. 통계적 분석 결과

### 전체 데이터
- 총 데이터 수: 324,296건
- 삭제 대상: 23,676건 (7.30%)
- 분석 대상: 300,620건 (92.70%)

### 구분별 삭제율
1. 게시글: 11,329건 중 1,909건 삭제 (16.8%)
2. 댓글: 312,967건 중 21,767건 삭제 (6.96%)

### Depth별 삭제율
1. depth 0 (직접 댓글): 234,197건 중 13,002건 삭제 (5.55%)
2. depth 1 (대댓글): 90,099건 중 10,674건 삭제 (11.8%)

## 3. 필터링 적용 시나리오

### 시나리오 1: 기본 분석용 (권장)
```
필터링 순서:
1. content 기반 기본 삭제 메시지 제외
2. author 기반 탈퇴 회원 제외
3. 빈 내용 제외
4. 매우 짧은 내용 제외
5. 유효 문자 미포함 제외
```

### 시나리오 2: 엄격한 필터링 (연구용)
```
추가 필터링:
6. content 기반 삭제 키워드 제외
```

## 4. 구현 예시 (R 코드)

```r
# 삭제된 콘텐츠 필터링 함수
filter_deleted_content <- function(data) {
  # 1. 기본 삭제 메시지 필터링
  basic_deletion_patterns <- c(
    "작성자가 댓글을 삭제하였습니다",
    "비밀 댓글입니다", 
    "내용 없음"
  )
  
  basic_mask <- rep(FALSE, nrow(data))
  for (pattern in basic_deletion_patterns) {
    basic_mask <- basic_mask | grepl(pattern, data$content, fixed = TRUE)
  }
  
  # 2. 탈퇴 회원 필터링
  withdrawal_mask <- grepl("탈퇴회원", data$author)
  
  # 3. 빈 내용 필터링
  empty_mask <- is.na(data$content) | data$content == "" | trimws(data$content) == ""
  
  # 4. 매우 짧은 내용 필터링
  short_mask <- nchar(data$content) <= 2
  
  # 5. 유효 문자 미포함 필터링
  no_valid_chars_mask <- !grepl("[가-힣A-Za-z]", data$content)
  
  # 종합 필터
  total_mask <- basic_mask | withdrawal_mask | empty_mask | short_mask | no_valid_chars_mask
  
  # 필터링된 데이터 반환
  return(data[!total_mask, ])
}
```

## 5. 품질 관리 추천

### 정기 점검 항목
1. **새로운 삭제 패턴 모니터링**: 주기적으로 데이터 샘플링하여 새로운 삭제 패턴 식별
2. **필터링 정확도 검증**: 무작위 샘플을 통해 필터링 정확도 측정
3. **삭제율 추이 분석**: 시간에 따른 삭제율 변화 모니터링

### 예외 처리
1. **분석 목적에 따른 예외**: 특정 연구 목적을 위해 삭제 데이터 포함 가능
2. **리뷰 프로세스**: 의심스러운 필터링 케이스에 대한 수동 검토 프로세스

## 6. 성능 고려사항

1. **벡터화 연산**: 대용량 데이터 처리를 위한 벡터화 연산 활용
2. **메모리 관리**: 큰 데이터셋 처리 시 메모리 사용량 모니터링
3. **병렬 처리**: 가능하면 병렬 처리를 통한 성능 향상

이 가이드를 기반으로 데이터 전처리를 수행하면 분석 품질을 향상시킬 수 있습니다.